{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@undertaker/fla-loader/webpack/bootstrap","webpack://@undertaker/fla-loader/webpack/runtime/compat get default export","webpack://@undertaker/fla-loader/webpack/runtime/define property getters","webpack://@undertaker/fla-loader/webpack/runtime/hasOwnProperty shorthand","webpack://@undertaker/fla-loader/external root \"flarum.core.compat['admin/app']\"","webpack://@undertaker/fla-loader/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@undertaker/fla-loader/external root \"flarum.core.compat['common/Component']\"","webpack://@undertaker/fla-loader/external root \"flarum.core.compat['common/components/Button']\"","webpack://@undertaker/fla-loader/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@undertaker/fla-loader/external root \"flarum.core.compat['common/components/Select']\"","webpack://@undertaker/fla-loader/./js/src/admin/components/FlaLoaderPage.js","webpack://@undertaker/fla-loader/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@undertaker/fla-loader/./js/src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","import Component from 'flarum/common/Component';\r\nimport Button from 'flarum/common/components/Button';\r\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\r\nimport Select from 'flarum/common/components/Select';\r\n\r\nexport default class FlaLoaderPage extends Component {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    \r\n    this.loading = true;\r\n    this.files = [];\r\n    this.groups = [];\r\n    this.users = [];\r\n    this.selectedUserId = null;\r\n    this.selectedGroupId = null;\r\n    this.selectedDuration = '30d';\r\n    \r\n    // File upload state\r\n    this.uploadFileIsPublic = false;\r\n    this.uploadFileGroups = [];\r\n    this.fileInputRef = null;\r\n    this.hwidUserIdRef = null;\r\n    \r\n    this.loadData();\r\n  }\r\n  \r\n  oncreate(vnode) {\r\n    super.oncreate(vnode);\r\n    this.element = vnode.dom;\r\n  }\r\n\r\n  loadData() {\r\n    Promise.all([\r\n      app.store.all('groups'),\r\n      app.request({\r\n        method: 'GET',\r\n        url: app.forum.attribute('apiUrl') + '/fla-loader/files',\r\n      }),\r\n    ]).then(([groups, filesResponse]) => {\r\n      this.groups = groups;\r\n      this.files = filesResponse.data || [];\r\n      this.loading = false;\r\n      m.redraw();\r\n    });\r\n  }\r\n\r\n  view() {\r\n    if (this.loading) {\r\n      return <LoadingIndicator />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"FlaLoaderPage\">\r\n        <div className=\"container\">\r\n          <h2>Fla Loader Management</h2>\r\n\r\n          {/* File Management Section */}\r\n          <div className=\"FlaLoaderSection\">\r\n            <h3>File Management</h3>\r\n            <div className=\"Form\">\r\n              <div className=\"Form-group\">\r\n                <label>Upload File</label>\r\n                <input\r\n                  type=\"file\"\r\n                  oncreate={(vnode) => { this.fileInputRef = vnode.dom; }}\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"Form-group\">\r\n                <label>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={this.uploadFileIsPublic}\r\n                    onchange={(e) => { this.uploadFileIsPublic = e.target.checked; }}\r\n                  />\r\n                  {' '}Make file public (visible in Download page)\r\n                </label>\r\n              </div>\r\n              \r\n              <div className=\"Form-group\">\r\n                <label>Allowed Groups (hold Ctrl/Cmd to select multiple)</label>\r\n                <select\r\n                  multiple\r\n                  className=\"FormControl\"\r\n                  style=\"height: 120px;\"\r\n                  onchange={(e) => {\r\n                    this.uploadFileGroups = Array.from(e.target.selectedOptions).map(o => parseInt(o.value));\r\n                  }}\r\n                >\r\n                  {this.groups.map((group) => (\r\n                    <option key={group.id()} value={group.id()}>\r\n                      {group.nameSingular()}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                <small>Leave empty to allow all groups</small>\r\n              </div>\r\n              \r\n              <Button\r\n                className=\"Button Button--primary\"\r\n                onclick={() => this.uploadFile()}\r\n              >\r\n                Upload File\r\n              </Button>\r\n              \r\n              <div className=\"FileList\">\r\n                <h4>Uploaded Files</h4>\r\n                {this.files.length === 0 ? (\r\n                  <p>No files uploaded yet.</p>\r\n                ) : (\r\n                  <table className=\"Table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>File Name</th>\r\n                        <th>Public</th>\r\n                        <th>Allowed Groups</th>\r\n                        <th>Actions</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {this.files.map((file) => (\r\n                        <tr key={file.id}>\r\n                          <td>{file.originalName}</td>\r\n                          <td>{file.isPublic ? 'Yes' : 'No'}</td>\r\n                          <td>\r\n                            {file.allowedGroups.length > 0\r\n                              ? file.allowedGroups.join(', ')\r\n                              : 'All'}\r\n                          </td>\r\n                          <td>\r\n                            <Button\r\n                              className=\"Button Button--danger\"\r\n                              onclick={() => this.deleteFile(file.id)}\r\n                            >\r\n                              Delete\r\n                            </Button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Role Assignment Section */}\r\n          <div className=\"FlaLoaderSection\">\r\n            <h3>Time-Limited Role Assignment</h3>\r\n            <div className=\"Form\">\r\n              <div className=\"Form-group\">\r\n                <label>User ID</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"FormControl\"\r\n                  value={this.selectedUserId || ''}\r\n                  oninput={(e) => { this.selectedUserId = e.target.value; }}\r\n                  placeholder=\"Enter user ID\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"Form-group\">\r\n                <label>Group</label>\r\n                <Select\r\n                  value={this.selectedGroupId}\r\n                  options={this.groups.reduce((acc, group) => {\r\n                    acc[group.id()] = group.nameSingular();\r\n                    return acc;\r\n                  }, {})}\r\n                  onchange={(value) => { this.selectedGroupId = value; }}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"Form-group\">\r\n                <label>Duration</label>\r\n                <Select\r\n                  value={this.selectedDuration}\r\n                  options={{\r\n                    '7d': '7 Days',\r\n                    '30d': '30 Days',\r\n                    '180d': '180 Days',\r\n                    '1y': '1 Year',\r\n                    'lifetime': 'Lifetime',\r\n                  }}\r\n                  onchange={(value) => { this.selectedDuration = value; }}\r\n                />\r\n              </div>\r\n\r\n              <Button\r\n                className=\"Button Button--primary\"\r\n                onclick={() => this.assignRole()}\r\n              >\r\n                Assign Role\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* HWID Management Section */}\r\n          <div className=\"FlaLoaderSection\">\r\n            <h3>HWID Management</h3>\r\n            <div className=\"Form\">\r\n              <div className=\"Form-group\">\r\n                <label>User ID</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"FormControl\"\r\n                  oncreate={(vnode) => { this.hwidUserIdRef = vnode.dom; }}\r\n                  placeholder=\"Enter user ID to check or reset HWID\"\r\n                />\r\n              </div>\r\n\r\n              <div style=\"display: flex; gap: 10px;\">\r\n                <Button\r\n                  className=\"Button Button--primary\"\r\n                  onclick={() => this.checkHwid()}\r\n                >\r\n                  Check HWID Status\r\n                </Button>\r\n                \r\n                <Button\r\n                  className=\"Button Button--warning\"\r\n                  onclick={() => this.resetHwid()}\r\n                >\r\n                  Reset HWID\r\n                </Button>\r\n              </div>\r\n\r\n              <div id=\"hwidStatus\" style=\"margin-top: 15px;\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  uploadFile() {\r\n    const file = this.fileInputRef && this.fileInputRef.files[0];\r\n    \r\n    if (!file) {\r\n      app.alerts.show({ type: 'error' }, 'Please select a file to upload');\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('isPublic', this.uploadFileIsPublic);\r\n    formData.append('allowedGroups', JSON.stringify(this.uploadFileGroups));\r\n\r\n    app.request({\r\n      method: 'POST',\r\n      url: app.forum.attribute('apiUrl') + '/fla-loader/files',\r\n      body: formData,\r\n      serialize: (raw) => raw,\r\n    }).then(() => {\r\n      app.alerts.show({ type: 'success' }, 'File uploaded successfully');\r\n      // Reset form\r\n      if (this.fileInputRef) this.fileInputRef.value = '';\r\n      this.uploadFileIsPublic = false;\r\n      this.uploadFileGroups = [];\r\n      this.loadData();\r\n    }).catch(() => {\r\n      app.alerts.show({ type: 'error' }, 'Failed to upload file');\r\n    });\r\n  }\r\n\r\n  deleteFile(fileId) {\r\n    if (!confirm('Are you sure you want to delete this file?')) return;\r\n\r\n    app.request({\r\n      method: 'DELETE',\r\n      url: app.forum.attribute('apiUrl') + '/fla-loader/files/' + fileId,\r\n    }).then(() => {\r\n      app.alerts.show({ type: 'success' }, 'File deleted successfully');\r\n      this.loadData();\r\n    }).catch(() => {\r\n      app.alerts.show({ type: 'error' }, 'Failed to delete file');\r\n    });\r\n  }\r\n\r\n  assignRole() {\r\n    if (!this.selectedUserId || !this.selectedGroupId) {\r\n      app.alerts.show({ type: 'error' }, 'Please fill in all fields');\r\n      return;\r\n    }\r\n\r\n    app.request({\r\n      method: 'POST',\r\n      url: app.forum.attribute('apiUrl') + '/fla-loader/roles',\r\n      body: {\r\n        userId: this.selectedUserId,\r\n        groupId: this.selectedGroupId,\r\n        duration: this.selectedDuration,\r\n      },\r\n    }).then(() => {\r\n      app.alerts.show({ type: 'success' }, 'Role assigned successfully');\r\n      this.selectedUserId = null;\r\n      this.selectedGroupId = null;\r\n      this.selectedDuration = '30d';\r\n      m.redraw();\r\n    }).catch(() => {\r\n      app.alerts.show({ type: 'error' }, 'Failed to assign role');\r\n    });\r\n  }\r\n\r\n  checkHwid() {\r\n    const userId = this.hwidUserIdRef ? this.hwidUserIdRef.value : null;\r\n\r\n    if (!userId) {\r\n      app.alerts.show({ type: 'error' }, 'Please enter a user ID');\r\n      return;\r\n    }\r\n\r\n    app.request({\r\n      method: 'GET',\r\n      url: app.forum.attribute('apiUrl') + '/fla-loader/hwid/' + userId,\r\n    }).then((response) => {\r\n      const data = response.data;\r\n      const statusDiv = this.element && this.element.querySelector('#hwidStatus');\r\n      \r\n      if (statusDiv) {\r\n        statusDiv.innerHTML = `\r\n          <div class=\"Alert Alert--info\">\r\n            <strong>User:</strong> ${data.username}<br>\r\n            <strong>Has HWID:</strong> ${data.hasHwid ? 'Yes' : 'No'}<br>\r\n            ${data.hasHwid ? `<strong>HWID Preview:</strong> ${data.hwid}<br>` : ''}\r\n            ${data.registeredAt ? `<strong>Registered At:</strong> ${data.registeredAt}` : ''}\r\n          </div>\r\n        `;\r\n      }\r\n      \r\n      app.alerts.show({ type: 'success' }, 'HWID status retrieved');\r\n    }).catch((error) => {\r\n      app.alerts.show({ type: 'error' }, 'Failed to get HWID status');\r\n    });\r\n  }\r\n\r\n  resetHwid() {\r\n    const userId = this.hwidUserIdRef ? this.hwidUserIdRef.value : null;\r\n\r\n    if (!userId) {\r\n      app.alerts.show({ type: 'error' }, 'Please enter a user ID');\r\n      return;\r\n    }\r\n\r\n    if (!confirm('Are you sure you want to reset this user\\'s HWID? They will be able to login from a new device.')) {\r\n      return;\r\n    }\r\n\r\n    app.request({\r\n      method: 'POST',\r\n      url: app.forum.attribute('apiUrl') + '/fla-loader/hwid/reset',\r\n      body: { userId: userId },\r\n    }).then((response) => {\r\n      const data = response.data;\r\n      app.alerts.show({ type: 'success' }, data.message);\r\n      \r\n      // Clear the status display\r\n      const statusDiv = this.element && this.element.querySelector('#hwidStatus');\r\n      if (statusDiv) {\r\n        statusDiv.innerHTML = '';\r\n      }\r\n      \r\n      // Clear the input\r\n      if (this.hwidUserIdRef) {\r\n        this.hwidUserIdRef.value = '';\r\n      }\r\n    }).catch(() => {\r\n      app.alerts.show({ type: 'error' }, 'Failed to reset HWID');\r\n    });\r\n  }\r\n}\r\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","import app from 'flarum/admin/app';\r\nimport FlaLoaderPage from './components/FlaLoaderPage';\r\n\r\napp.initializers.add('undertaker/fla-loader', () => {\r\n  app.extensionData\r\n    .for('undertaker/fla-loader')\r\n    .registerSetting({\r\n      setting: 'fla-loader.public_file_id',\r\n      type: 'text',\r\n      label: app.translator.trans('undertaker-fla-loader.admin.settings.public_file_id_label'),\r\n      help: app.translator.trans('undertaker-fla-loader.admin.settings.public_file_id_help'),\r\n    })\r\n    .registerPermission(\r\n      {\r\n        icon: 'fas fa-download',\r\n        label: app.translator.trans('undertaker-fla-loader.admin.permissions.download_files'),\r\n        permission: 'flaLoader.downloadFiles',\r\n      },\r\n      'view'\r\n    )\r\n    .registerPermission(\r\n      {\r\n        icon: 'fas fa-upload',\r\n        label: app.translator.trans('undertaker-fla-loader.admin.permissions.manage_files'),\r\n        permission: 'flaLoader.manageFiles',\r\n      },\r\n      'moderate'\r\n    )\r\n    .registerPage({\r\n      component: FlaLoaderPage,\r\n      path: '/fla-loader',\r\n      label: 'Fla Loader',\r\n      icon: 'fas fa-download'\r\n    });\r\n});\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","FlaLoaderPage","_Component","apply","arguments","create","constructor","_proto","oninit","vnode","this","loading","files","groups","users","selectedUserId","selectedGroupId","selectedDuration","uploadFileIsPublic","uploadFileGroups","fileInputRef","hwidUserIdRef","loadData","oncreate","element","dom","_this","Promise","all","app","store","request","method","url","forum","attribute","then","_ref","filesResponse","data","m","redraw","view","_this2","LoadingIndicator","className","type","checked","onchange","target","multiple","style","Array","from","selectedOptions","map","parseInt","value","group","id","nameSingular","Button","onclick","uploadFile","length","file","originalName","isPublic","allowedGroups","join","deleteFile","oninput","placeholder","Select","options","reduce","acc","assignRole","checkHwid","resetHwid","_this3","formData","FormData","append","JSON","stringify","body","serialize","raw","alerts","show","fileId","_this4","confirm","_this5","userId","groupId","duration","_this6","response","statusDiv","querySelector","innerHTML","username","hasHwid","hwid","registeredAt","error","_this7","message","Component","add","registerSetting","setting","label","trans","help","registerPermission","icon","permission","registerPage","component","path"],"ignoreList":[],"sourceRoot":""}